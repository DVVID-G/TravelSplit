@startuml 03-components-frontend
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

' Generated by C4 Diagram Generator
' Agent: C4 Diagram Generator
' System: TravelSplit v1.0.0
' Date: 2026-01-15

title TravelSplit - Frontend Components Diagram

' Container
Container_Boundary(frontend_app, "Frontend Web App") {
    
    ' Pages (Top Level)
    Component(home_page, "Home Page", "React Page", "Pagina principal que muestra resumen de viajes y gastos recientes.")
    Component(login_page, "Login Page", "React Page", "Pagina de inicio de sesion. Maneja autenticacion de usuarios.")
    Component(register_page, "Register Page", "React Page", "Pagina de registro de nuevos usuarios.")
    Component(trips_list_page, "Trips List Page", "React Page", "Pagina que muestra la lista de viajes del usuario autenticado.")
    Component(trip_detail_page, "Trip Detail Page", "React Page", "Pagina que muestra los detalles de un viaje: participantes, gastos, saldos.")
    Component(create_trip_page, "Create Trip Page", "React Page", "Pagina para crear un nuevo viaje e invitar participantes.")
    Component(expense_form_page, "Expense Form Page", "React Page", "Pagina para registrar un nuevo gasto en un viaje.")
    
    ' Organisms (Complex Components)
    Component(header, "Header", "React Organism", "Componente de encabezado de la aplicacion. Muestra informacion del usuario y navegacion.")
    Component(bottom_tab_bar, "Bottom Tab Bar", "React Organism", "Barra de navegacion inferior. Permite navegar entre secciones principales.")
    Component(join_trip_modal, "Join Trip Modal", "React Organism", "Modal para unirse a un viaje mediante codigo alfanumerico.")
    
    ' Molecules (Composite Components)
    Component(trip_card, "Trip Card", "React Molecule", "Tarjeta que muestra informacion resumida de un viaje.")
    Component(balance_card, "Balance Card", "React Molecule", "Tarjeta que muestra el balance de un usuario en un viaje.")
    Component(recent_expense_card, "Recent Expense Card", "React Molecule", "Tarjeta que muestra informacion de un gasto reciente.")
    Component(expense_form, "Expense Form", "React Molecule", "Formulario para crear o editar un gasto. Usa React Hook Form y Zod.")
    Component(category_selector, "Category Selector", "React Molecule", "Selector de categoria para gastos (Comida, Transporte, etc.).")
    Component(payer_selector, "Payer Selector", "React Molecule", "Selector de usuario que pago el gasto.")
    Component(beneficiaries_selector, "Beneficiaries Selector", "React Molecule", "Selector multiple de usuarios beneficiarios del gasto.")
    Component(email_search_input, "Email Search Input", "React Molecule", "Input con busqueda de usuarios por email para invitaciones.")
    Component(join_trip_button, "Join Trip Button", "React Molecule", "Boton que abre el modal para unirse a un viaje.")
    Component(protected_route, "Protected Route", "React Molecule", "Componente que protege rutas, redirigiendo a login si no hay autenticacion.")
    Component(error_state, "Error State", "React Molecule", "Componente que muestra estados de error con mensajes y acciones.")
    Component(empty_state, "Empty State", "React Molecule", "Componente que muestra estados vacios con mensajes informativos.")
    Component(toast, "Toast", "React Molecule", "Componente de notificacion toast para mensajes temporales.")
    Component(card, "Card", "React Molecule", "Componente base de tarjeta reutilizable.")
    Component(form_field, "Form Field", "React Molecule", "Componente de campo de formulario con label y validacion.")
    
    ' Atoms (Basic Components)
    Component(button, "Button", "React Atom", "Boton base reutilizable con variantes de estilo.")
    Component(input, "Input", "React Atom", "Input de texto base con validacion y estados.")
    Component(amount_input, "Amount Input", "React Atom", "Input especializado para montos monetarios en COP.")
    Component(category_pill, "Category Pill", "React Atom", "Pildora que muestra una categoria de gasto con color distintivo.")
    Component(image_upload, "Image Upload", "React Atom", "Componente para subir y previsualizar imagenes de recibos.")
    Component(skeleton, "Skeleton", "React Atom", "Componente de carga esqueleto para estados de loading.")
    Component(dev_indicator, "Dev Indicator", "React Atom", "Indicador de ambiente de desarrollo.")
    
    ' Hooks (Business Logic)
    Component(use_auth, "useAuth Hook", "React Hook", "Hook personalizado que maneja estado de autenticacion, login, logout, y persistencia de token.")
    Component(use_trip_detail, "useTripDetail Hook", "React Hook", "Hook que obtiene y gestiona los detalles de un viaje usando TanStack Query.")
    Component(use_trip_participants, "useTripParticipants Hook", "React Hook", "Hook que obtiene y gestiona la lista de participantes de un viaje.")
    Component(use_expense_form, "useExpenseForm Hook", "React Hook", "Hook que maneja el formulario de gastos con React Hook Form y validacion Zod.")
    Component(use_expense_form_data, "useExpenseFormData Hook", "React Hook", "Hook que obtiene datos necesarios para el formulario de gastos (participantes, categorias).")
    
    ' Services (API Communication)
    Component(auth_service, "Auth Service", "TypeScript Service", "Servicio que maneja llamadas API de autenticacion: login y registro.")
    Component(trip_service, "Trip Service", "TypeScript Service", "Servicio que maneja llamadas API de viajes: crear, listar, obtener detalles, unirse.")
    Component(expense_service, "Expense Service", "TypeScript Service", "Servicio que maneja llamadas API de gastos: crear, listar, obtener detalles.")
    
    ' Contexts (State Management)
    Component(auth_context, "Auth Context", "React Context", "Context provider que provee estado de autenticacion global a toda la aplicacion.")
    
    ' Configuration
    Component(api_config, "API Config", "TypeScript Config", "Configuracion de la URL base de la API y utilidades de fetch.")
    Component(routes_config, "Routes Config", "React Router", "Configuracion de rutas de la aplicacion usando React Router.")
}

' External Systems
System_Ext(backend_api, "Backend API", "NestJS REST API")
System_Ext(react_query, "TanStack Query", "Libreria para gestion de estado del servidor")
System_Ext(react_router, "React Router", "Libreria para enrutamiento")
System_Ext(react_hook_form, "React Hook Form", "Libreria para manejo de formularios")
System_Ext(zod, "Zod", "Libreria para validacion de esquemas")

' Relationships - Pages to Components
Rel(home_page, trip_card, "Usa", "Render")
Rel(home_page, recent_expense_card, "Usa", "Render")
Rel(home_page, balance_card, "Usa", "Render")
Rel(trips_list_page, trip_card, "Usa", "Render")
Rel(trip_detail_page, balance_card, "Usa", "Render")
Rel(trip_detail_page, recent_expense_card, "Usa", "Render")
Rel(trip_detail_page, join_trip_button, "Usa", "Render")
Rel(create_trip_page, email_search_input, "Usa", "Render")
Rel(expense_form_page, expense_form, "Usa", "Render")
Rel(expense_form_page, category_selector, "Usa", "Render")
Rel(expense_form_page, payer_selector, "Usa", "Render")
Rel(expense_form_page, beneficiaries_selector, "Usa", "Render")
Rel(expense_form_page, image_upload, "Usa", "Render")

' Relationships - Organisms
Rel(header, button, "Usa", "Render")
Rel(bottom_tab_bar, button, "Usa", "Render")
Rel(join_trip_modal, input, "Usa", "Render")
Rel(join_trip_modal, button, "Usa", "Render")

' Relationships - Molecules to Atoms
Rel(trip_card, card, "Usa", "Render")
Rel(balance_card, card, "Usa", "Render")
Rel(recent_expense_card, card, "Usa", "Render")
Rel(expense_form, form_field, "Usa", "Render")
Rel(expense_form, button, "Usa", "Render")
Rel(category_selector, category_pill, "Usa", "Render")
Rel(payer_selector, input, "Usa", "Render")
Rel(beneficiaries_selector, input, "Usa", "Render")
Rel(email_search_input, input, "Usa", "Render")
Rel(form_field, input, "Usa", "Render")

' Relationships - Pages to Hooks
Rel(login_page, use_auth, "Usa", "Hook")
Rel(register_page, use_auth, "Usa", "Hook")
Rel(trip_detail_page, use_trip_detail, "Usa", "Hook")
Rel(trip_detail_page, use_trip_participants, "Usa", "Hook")
Rel(create_trip_page, use_trip_participants, "Usa", "Hook")
Rel(expense_form_page, use_expense_form, "Usa", "Hook")
Rel(expense_form_page, use_expense_form_data, "Usa", "Hook")

' Relationships - Hooks to Services
Rel(use_auth, auth_service, "Usa", "Service Call")
Rel(use_trip_detail, trip_service, "Usa", "Service Call")
Rel(use_trip_participants, trip_service, "Usa", "Service Call")
Rel(use_expense_form_data, trip_service, "Usa", "Service Call")
Rel(use_expense_form_data, expense_service, "Usa", "Service Call")

' Relationships - Services to Backend
Rel(auth_service, backend_api, "Hace peticiones", "HTTPS/REST")
Rel(trip_service, backend_api, "Hace peticiones", "HTTPS/REST")
Rel(expense_service, backend_api, "Hace peticiones", "HTTPS/REST")

' Relationships - Services to Config
Rel(auth_service, api_config, "Usa", "Config")
Rel(trip_service, api_config, "Usa", "Config")
Rel(expense_service, api_config, "Usa", "Config")

' Relationships - Context
Rel(auth_context, use_auth, "Provee", "Context Provider")
Rel(protected_route, auth_context, "Usa", "Context Consumer")

' Relationships - External Libraries
Rel(use_trip_detail, react_query, "Usa", "Library")
Rel(use_trip_participants, react_query, "Usa", "Library")
Rel(use_expense_form, react_hook_form, "Usa", "Library")
Rel(use_expense_form, zod, "Usa", "Library")
Rel(routes_config, react_router, "Usa", "Library")
Rel(frontend_app, routes_config, "Usa", "Router Config")

@enduml
